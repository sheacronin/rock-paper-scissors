<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>rock paper scissors</title>
</head>
<body>

<div id="score">0 / 0</div>

<button>ROCK</button>
<button>PAPER</button>
<button>SCISSORS</button>

<div id="results"></div>

<script>
    const choices = ['ROCK', 'PAPER', 'SCISSORS'];

    // Helper funciton to determine index for computer choice.
    function generateIndex(listLength) {
        return Math.floor(Math.random() * listLength);
    }

    // Computer makes selection.
    function computerPlay() {
        let randomIndex = generateIndex(3);
        return choices[randomIndex];
    }

    // Keep score.
    let playerScore = 0;
    let computerScore = 0;

    // Storing score & results divs.
    const score = document.querySelector('#score');
    const results = document.querySelector('#results');

    function playRound(playerSelection, computerSelection) {
        // The result message.
        const winningMessage = `You win! ${playerSelection} beats ${computerSelection}.`
        const losingMessage = `You lose! ${computerSelection} beats ${playerSelection}.`

        // Functions to run if you win / lose.
        function showResult(playerWins) {
            if (playerWins) {
                playerScore++;
                score.textContent = playerScore + ' / ' + computerScore;
                return winningMessage;
            } else {
                computerScore++;
                score.textContent = playerScore + ' / ' + computerScore;
                return losingMessage;
            }
        }

        // If selection is the same, they tie.
        if (playerSelection === computerSelection) {
            return `Tie! You both chose ${playerSelection}`;
        }

        // Switch to determine if player wins/loses.
        switch (playerSelection) {
            case 'ROCK':
                if (computerSelection === 'PAPER') {
                    return showResult(false);
                } else {
                    return showResult(true);
                }
                break;

            case 'PAPER':
                if (computerSelection === 'SCISSORS') {
                    return showResult(false);
                } else {
                    return showResult(true);
                }
                break;
            
            case 'SCISSORS':
                if (computerSelection === 'ROCK') {
                    return showResult(false);
                } else {
                    return showResult(true);
                }
                break;

            default:
               console.log('Incorrect input.')
        }
    }

    // Adding event listeners for buttons.
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => button.addEventListener('click', () => {
        const round = playRound(button.textContent, computerPlay());

        // Appending results to the div.
        const p = document.createElement('p');
        p.textContent += round;
        results.appendChild(p);
    }));
    
</script>
</body>
</html>